function [Y,Xf,Af] = myNeuralNetworkFunction_3(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 05-Jul-2017 05:25:35.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 84xQ matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84];
x1_step2.xoffset = [535;535;538;539;542;538;536;536;536;536;536;536;543;539;536;535;535;535;535;540;591;613;610;606;603;600;597;596;592;588;583;578;573;568;571;565;559;553;546;540;540;536;533;541;535;533;531;538;535;532;541;535;532;533;536;533;530;528;526;532;529;526;524;525;523;521;520;519;519;595;594;588;586;581;576;570;565;560;557];
x1_step2.gain = [0.05;0.0571428571428571;0.0625;0.0645161290322581;0.0645161290322581;0.0645161290322581;0.0645161290322581;0.0666666666666667;0.0689655172413793;0.0588235294117647;0.0645161290322581;0.0645161290322581;0.0606060606060606;0.0606060606060606;0.0625;0.0606060606060606;0.0540540540540541;0.0606060606060606;0.0666666666666667;0.05;0.0645161290322581;0.0555555555555556;0.0512820512820513;0.0476190476190476;0.05;0.05;0.0526315789473684;0.0526315789473684;0.0540540540540541;0.04;0.0277777777777778;0.028169014084507;0.028169014084507;0.0285714285714286;0.0285714285714286;0.0285714285714286;0.0285714285714286;0.0285714285714286;0.0285714285714286;0.0238095238095238;0.019047619047619;0.0196078431372549;0.0198019801980198;0.0202020202020202;0.0202020202020202;0.0208333333333333;0.021505376344086;0.024390243902439;0.0256410256410256;0.021978021978022;0.0206185567010309;0.0206185567010309;0.021505376344086;0.0232558139534884;0.025974025974026;0.027027027027027;0.0172413793103448;0.0178571428571429;0.0185185185185185;0.0208333333333333;0.0217391304347826;0.0222222222222222;0.0206185567010309;0.021978021978022;0.0163934426229508;0.0169491525423729;0.0169491525423729;0.0176991150442478;0.0185185185185185;0.0224719101123596;0.0235294117647059;0.0235294117647059;0.0235294117647059;0.0238095238095238;0.0238095238095238;0.0235294117647059;0.0235294117647059;0.0232558139534884;0.0232558139534884];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.7715979768142704;1.4696269847751167;-0.78520755324809188;0.37477991555824852;-0.2795284549987424;-0.12819796389213867;-0.098559954001539496;0.83633342509475828;0.80008052883582337;1.2236575782523766];
IW1_1 = [0.30809544539800954 -0.23254217389794979 -0.045118316687792266 -0.062271722984481366 0.23745641239655429 -0.057615981345494893 0.026812812324480583 0.08905828590962557 0.28557298532527742 0.30284638646690465 -0.26153330343706976 -0.17333905108047834 0.21886942358914993 -0.017882340778297916 0.0094117288991480107 -0.45478206778611169 -0.051177204283937371 0.048272841139402965 0.14234419228785303 0.023478060488370825 0.25590957901344491 0.20628901771270455 0.1442084408236953 0.13560698868141469 0.056850645315051573 0.085579781075407604 0.013222975587275162 0.1887781974685345 0.18451299156427547 -0.12507501622304149 -0.0060907460983357798 0.22207533275946911 0.31486656411800606 -0.22314639583885593 -0.050417466168937011 0.050222905190836421 0.28244641060124154 0.049113208264242161 -0.071459292386449547 -0.2121888655953133 -0.087711273023791808 -0.23691732788421685 0.16979751496264878 -0.33217221252610496 0.099628974235667231 -0.41768086028282359 -0.079893642343666749 -0.060925740942176385 -0.20705002971136321 -0.11461400268070349 0.087946830193330605 0.098574626999673898 -0.023346804483814841 -0.19607692982586103 -0.27479207853788556 -0.2700663413497823 0.13652273046070576 -0.14710062507084418 -0.081776155035110557 0.21674297232040801 -0.17954246509692556 -0.13107241283508778 -0.27257438682533852 -0.33358054548275712 -0.058933199562298429 -0.28285744301181126 0.049271332320100142 0.17909639714243286 0.038197808388840959 -0.10128014704200548 -0.022373081255386347 -0.36406185822251808 -0.099284386197253077 -0.032270874017892713 -0.35217241995968429 -0.0056812267305093242 0.12409801443221835 -0.29771661841159974 0.11158880905263366;0.067769669056794213 -0.0066504301139110027 -0.12599401462097318 0.5220094177083594 0.075808613715463311 0.4400111465903076 -0.080990057735878751 -0.11059888627104665 -0.3207480182659504 -0.26483627959159306 -0.068054746085167164 -0.096604161598622937 -0.014470512816547099 0.44012792917395088 0.67188387969278396 -0.25202504236281842 0.040662609442386539 0.28726404913347831 0.085402812462233302 0.96188552111669967 0.037515846749334045 0.0012908372084274103 -0.01568121474901614 0.3677181667616537 -0.11632467961843658 -0.16626047174459699 -0.11079027112229432 0.14350394906335984 -0.13101488534626601 0.11983108715274786 0.21337297305802735 0.54055288983412508 -0.041216431842714243 0.44882067941042986 0.086233282631523175 0.024519044741989026 0.14719745367172932 -0.18538377571072573 -0.072404854274218 -0.028825919880959561 0.099458846095223763 0.32686165813881601 -0.53726137870188395 -0.45265229943584645 -0.035807211266800441 0.1276495051949168 -0.10529535453688264 0.050929397351696694 0.028378056025209715 -0.33836038695402243 -0.12654987534349646 0.15207646644892622 0.0074218842634254708 -0.52773295558077904 0.8286750675188449 -0.080274136968011819 -0.15647327574954795 -0.069805352908712301 0.55650929501812663 -0.42699558014918532 0.29701024536384452 0.52806682725618148 -0.77994395914598735 -0.31257180698240522 0.16051766966141034 -0.048468065775822078 0.17781040609816098 -0.1800549112863776 -0.2478395554846432 -0.053219271161866172 -0.11694551931417349 -0.062318183423188185 0.074685877909822562 0.27101446243096811 -0.016814777491409236 -0.35574373479128274 0.33272160148564189 -0.6325360642135347 -0.28992388083185505;0.0776268620170424 0.26205350208347655 0.029958374129436218 0.43635011714925864 0.016260159299750172 0.070464659610165487 -0.0062723961858832198 0.30160929291535049 -0.25224836142521101 -0.27980093639815679 -0.10275341896160896 -0.12514254909115008 0.072137565452628158 0.044465218732336123 0.24158102416802069 0.36512356235664845 -0.046434695928318385 0.023582491527529913 0.054335487456472931 -0.15439660598654559 -0.2322409712453517 -0.48095910816853099 -0.075270682244468382 -0.46959417434825768 -0.38179878743345069 -0.48767916472949957 -0.32482190920651716 -0.072457301429505738 -0.36876681588348603 -0.11182560941424352 -0.030414838222809961 -0.16490901652160142 0.038578516929585804 -0.39924798661216104 -0.27499492955697857 -0.21596649507357968 0.18064525733069303 0.014106277876951775 0.05963848874146753 -0.34365205262344511 0.033416328341023545 -0.035101037611237146 -0.11650446810034355 -0.014364260532708294 0.23515977589716067 0.18934384086974249 0.027599188405738904 0.0261007566207858 0.042372724988908733 -0.35051789984686216 0.19613985807211246 -0.0067930996606081154 -0.3656019169985944 -0.53157393074542181 -0.10834272855023824 0.034368728843401058 -0.034025292849648101 0.13877490030354414 0.073924974659460893 -0.30053336980551454 0.029294671585007395 0.06013598541281559 0.096331238824770571 0.17613991108801849 -0.020012791806192424 -0.30036935180705415 0.38017066828954321 0.38825320025952498 0.20266502828413965 -0.0047116740737124258 -0.20600397221841757 0.084506675408655599 0.19813564351015875 0.065584435924280426 0.16064757059037119 -0.090285869713304628 0.16289394875293983 -0.12803727355191377 -0.13178556484863527;-0.017312612109294107 -0.19685711371266573 0.089966003024529534 0.25297446441772869 0.2952720190728082 -0.046662513222120734 0.038345712993973491 -0.15225099825042515 0.19645919213740798 0.16998795727352017 0.21904280623427175 -0.069134952712707406 -0.16987059570952706 0.37440932075117261 0.14395214900932518 -0.0054808106607293697 0.24047862497504435 -0.24440639946263201 -0.036756637012402352 -0.21861447418915844 -0.0021429975965696277 -0.22671912775589853 0.0658540935898181 -0.06315586267897913 0.30028027700175058 -0.17497462286158155 0.00030008546637421991 -0.083606670141978687 -0.29596181795508181 -0.13469225575153526 0.24218557457168335 0.17221015907595033 -0.15801384232473051 -0.12115182036389374 -0.13063279785022852 0.01093677331976471 0.19678636996464466 -0.1563412559487786 -0.15958666898831184 -0.35073784198673841 0.1721177830332016 -0.41670238699826434 0.0090785745461630478 -0.38703445167030281 -0.30289293805637629 -0.047272296172197796 -0.15353527607446674 0.10917564594857504 -0.18956902799444411 0.15272037640996006 -0.16974906965459038 -0.0091299708523480752 0.29891544141134441 0.25030899080541635 -0.047093865465350923 0.16189679122217454 -0.23142127874290205 0.049126389292645546 0.095560116649806195 -0.051040092696135665 0.21401591618779126 0.14825014381890853 -0.31260876314947422 -0.255749746289331 -0.098966414854828669 0.34457784245956735 -0.13564888418822857 0.12397256500755761 -0.11434146273983194 -0.053990798917945178 0.26671062489471725 -0.029738949507898547 -0.27492842602183898 0.14857749373488668 -0.23426770772234728 -0.22744717429484521 0.1650611905843786 0.30516632012680966 -0.17023295073414288;0.19528707945117543 -0.22029525652642962 0.10075712038632362 -0.19975336266846264 -0.040252335065525932 -0.22165316826003328 0.11888642210890538 0.093205381400478543 0.13642897311453489 0.021805713783748255 0.1516289600705604 0.14194971050336941 0.074696698448239701 0.20649747742476415 -0.1296410738936119 -0.13506814756760677 -0.14721270906412845 -0.057781838902054392 0.033863317244061393 0.05059931545992246 -0.19722537827478734 0.086346055895629659 0.25207944776678787 0.27526423070987321 0.2658334533902782 -0.034280827841285777 0.071654951222834745 0.17646286328183575 0.25709487105298723 -0.33316659608445764 -0.068495047685052657 0.1706535405644258 0.016351503395462829 0.18398036912561619 0.020641866248933403 0.21335536793588447 -0.17658560803738563 0.18862044840520917 -0.28903513607524878 0.058654710317478306 0.11922160936251064 0.061093794331781699 0.050490497071278916 0.088830754273142284 0.13201671115252797 0.14006397363448023 0.064277905709610769 0.20937944683404333 0.083823784427408621 -0.17673242569196868 0.19226996197575297 -0.01764406726008699 0.29124355412813613 -0.18993004660822063 0.068067384199827302 -0.053730155772643999 0.16937498381951543 -0.018097064733184082 -0.22497019244670136 -0.21924626347737086 0.0089588480256799809 -0.2147515891399675 -0.16712473754123444 0.17466605745366684 -0.10293974009211483 0.11650004357503659 0.010478897172063432 0.25093290094586318 -0.045325549733581515 -0.11932988942398405 -0.12495767609791625 -0.19903054428460529 0.05620464869668175 -0.00952447112615162 0.22803888304006906 0.059035616792609179 0.31940503669611509 0.17359801369487432 -0.21460388577618439;0.25730183703287107 0.014202685233825871 0.31210064334311916 0.11660219374555682 0.2547937054280352 0.29636819681514259 0.24589154890607842 0.18428794136585114 0.16443992121152784 0.14893763002725463 -0.076144387325412288 -0.27531828654576485 -0.22073697596927527 -0.16489185656711594 0.28913284851217202 -0.41138280203059574 -0.026074077222969734 0.67830680670861687 0.77925654616452456 0.024155616612212012 -0.0031036262266304114 0.12274930002745363 0.10431305890967292 0.24353395900503952 0.03658264480302259 0.19257884524554333 -0.050511794937401856 0.41658490056535169 -0.094885674134895459 -0.22302033985991929 -0.0796197196815875 0.42340112030832189 -0.12187587051551683 0.087826075683254887 0.060060577542080246 0.22452345145082575 0.031430581034085407 0.015486494137085759 0.34651626866031321 -0.1303933413912978 0.18395198053664366 0.02864076295279128 -0.098317580052893788 -0.20741083460275372 0.016194533097043586 -0.25737567301857472 0.11232821911092057 -0.39978021161799882 -0.31632824378668734 -0.23702645889746971 0.3169168040585939 -0.085878304436726297 -0.0241276669054706 -0.35123864198503724 0.11503218959709233 0.06693900701197289 0.23687229482541403 -0.086165574024821015 0.13329128350224728 -0.48191210858187655 -0.022783008396204243 -0.13412229981379797 -0.092015059411443806 0.11862775166874684 0.020698813926903922 0.034975316198957183 0.18762566268609518 -0.20433059196723891 0.15647667075548335 0.21117140800711734 0.16440602165104901 0.025430401553288903 -0.21592305811559459 -0.015254648077683636 0.21826376561481686 -0.090551949533579298 -0.15631505900916601 0.12797831507643442 0.029829975096183653;-0.32539157636632426 -0.18884399703623725 -0.16973278157382085 -0.22343371095432674 0.094330686200478797 -0.024507096978884355 -0.067197390995032164 -0.34458759729513355 0.092728914433152759 0.05987849895458093 0.15972652696527806 -0.037633322380703438 -0.12320914163304886 -0.19584860748746613 -0.30959961394458996 0.14144772997652477 -0.15040148546085483 0.22358619697516649 0.068669325763484917 -0.056000253073800313 -0.037308614448134429 -0.1445626529080927 0.045888105442036267 0.27017694688689231 -0.02050405077907734 0.2372914711122513 0.051973988415853961 0.031201732594556237 0.16858175876211892 0.2534891983630867 0.011954758785747688 0.017580154664261181 -0.19028123216201873 0.10391838298384901 0.040889186567360729 0.20358419334608766 -0.16494162691072095 0.14891318161053121 0.26104626734272329 0.086814970440771119 -0.1044107940995247 -0.45847492976808107 0.061129492245706893 -0.18083620083783239 -0.28372249158947238 0.16580220365638093 0.10798833611015957 -0.39010339386475407 -0.12243340873308226 0.11984388215889076 0.12932190561955245 0.0012280750316130131 -0.084420544493283761 -0.21655808591266931 -0.25312768368661082 -0.24123925306654773 -0.10685988144423129 0.015720052916737372 -0.38567418444335971 0.15801556638812581 -0.21710166356214022 -0.16842569746271813 0.081167504918278177 0.033311222540191997 -0.3500367015062209 -0.031489167034742888 0.053866690248893186 0.060024207028395588 -0.27341133864758538 -0.18849867829511566 0.11227605407320565 -0.26652679463467838 -0.036317563951505767 0.15310402805467035 0.11610662236305706 0.07065709297462322 0.034467303678906401 -0.024141502336876949 0.037618413232550434;-0.11406989273123033 0.049017292845880696 -0.038831625050727674 -0.11179639627061723 0.091809409028947686 -0.23701817721279486 -0.16692328545235505 -0.17950588696734637 -0.27220033335788502 0.091391386937896044 -0.16523444946073518 -0.30934003486743139 0.083498696284773924 -0.0083029657209638397 0.0676247847483296 0.055049101317122151 0.35768653264950467 -0.75048956066021777 -0.72622300442179966 0.23321921413570271 -0.28207049778503218 -0.045004427606141532 -0.18803711828066821 -0.31365943354041598 0.23946915479868808 -0.10093472357317113 -0.026129130299743505 -0.20329204060879333 -0.15687574543998944 0.38191852600983672 0.20126561486923647 0.27302028823636076 0.45864545317095945 0.22705918935515995 0.13512588946928375 -0.062637615110034059 0.40626306016706776 0.21956459719825031 0.13797465099168318 0.46150032054269247 0.31391362457380922 0.82474345065536636 0.61004005408314221 0.18553683828788312 0.39532013852841502 0.068809381601963995 0.050135974956637769 0.26006762729277316 0.92315166342367416 0.61734509165931273 -0.023664675168156145 0.72857515730970712 0.12433651512490185 0.080176122629035285 -0.045369654733832428 -0.40848742322458326 0.010874819713679627 0.42456787256809192 -0.057669954614398916 0.34841557740357892 -0.069982347745653956 0.3241256299206795 0.23209862628130365 0.27267686320775858 -0.076783622348134364 0.29537699924777433 -0.040877115846581331 -0.027902821120977972 0.10356105738088188 -0.070540954635923941 -0.2946791395568043 0.40472527205191267 0.23443230194113082 0.21434256357194087 0.57411915248959489 0.13314121182879132 0.5222564031176623 0.28816083736966369 0.27594876643054222;0.12077043528525996 0.14947574421959284 0.28610309870393097 -0.15093086181779017 -0.016670226538581127 -0.43412019608229518 -0.32700561246825094 -0.12786189582511889 -0.16013681908597413 0.084071344358361874 -0.072893278908056844 -0.37291435501671799 0.55119156531036895 0.34961587608189626 0.40596124676053025 -0.11277717752185308 0.20400082773610462 -0.38932648159510413 -0.55956317927195065 -0.078909647578541145 0.14086007830337849 -0.053169748947103863 -0.17554127427198293 0.11819746125852751 0.085682123872938845 -0.083056211334085028 -0.099105901333393809 0.39254948001129353 -0.33173794087289898 0.31098381355566906 0.46396802481694044 -0.21927628050063244 0.28221275570397347 0.014196214860738798 0.38447710328197054 0.22270760176068605 0.2528491687319448 0.15232347206658664 0.1970634779148312 0.31966035216628863 -0.13751746801771492 0.20724903392567437 0.4759842062398626 0.092631070089965906 0.1516505961377036 -0.7406972728649861 -0.03645676829690464 -0.31040205709039859 -0.13236679708685775 0.37365622006646598 0.1433234040185257 -0.33290796164114744 -0.066329718824930037 0.15864081231615396 -0.53024521801228619 0.085059934544523791 -0.15366113361934092 -0.28652957481012276 0.052144077721340533 0.69952416144889451 -0.444065676490143 -0.53069652114242605 0.30498939390270408 -0.10683791414593639 -0.64855519600136868 0.086301640165470928 -0.029608544461754451 0.042122870844612442 -0.098391541725013326 -0.35652170342065942 0.29523588289578562 -0.081731095199433029 -0.22438986472771674 0.19453859336439425 -0.33656765740920391 0.25952785986502891 0.10717132144087915 0.56465352077913322 0.015094730817368181;0.33873062764148609 0.16028306126094144 -0.26820976319063694 -0.086279561186764955 -0.19640922998763954 -0.29028615410939057 -0.30635050290247023 -0.13169779367442402 -0.28383135227788636 -0.12065635500178837 0.06294998989424698 -0.16328136714327326 -0.08196128523625322 0.2832551371791347 -0.1656599708544596 -0.06763690292274542 -0.43495726068797863 -0.037665701585098924 0.20199183106352714 0.091422241743751492 0.066040997593461243 0.2682030245872094 0.10792026756535582 0.19119037363846694 0.32927248866427533 0.56826158784515513 0.20706698447842728 0.47551688808133147 0.044619175246963232 0.50450720511464797 0.015706645415387049 0.20060109230071579 0.075740116781632949 0.27137516526130528 0.40539629165246954 0.0067905872298363625 0.1584725069049325 0.34105038481106015 0.26363690763692887 0.27868701525589079 -0.24131567627940559 -0.27518109605510582 0.13132541414286808 -0.01599382799338548 0.19847346308094502 -0.21140567909780739 -0.012259464124079113 -0.12300884073570331 -0.29809695273561104 -0.45164260682584589 -0.27214416498071126 -0.33422136439636307 0.45928511080688522 -0.32889241166367877 0.094896541310686533 0.54088631184488911 -0.21717146738940193 -0.48162764650515522 0.1131833070432678 0.062873789627265322 0.19190099377651318 0.065497824340019245 -0.12697472865106008 -0.13506705873221792 -0.018624527835103384 -0.23024255930314319 -0.050715244246015541 0.22870011939639423 -0.36406098097140382 -0.185386161036592 0.064567470501616292 -0.17911059901408466 0.17922068113075929 -0.27258791160808699 0.043728112873183858 0.12423084293971091 -0.21159141771029005 -0.06019775529073329 -0.23664862823139249];

% Layer 2
b2 = -0.42490619196056928;
LW2_1 = [-0.65921395706643393 0.71033751635441245 0.61514770755246506 -0.60582464349581189 -0.019199771948794429 -0.5594476426878191 0.11417033591527248 0.32396836806903878 -0.11200057066957254 -0.33842546048250238];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.000992555831265509;
y1_step1.xoffset = 6395;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
