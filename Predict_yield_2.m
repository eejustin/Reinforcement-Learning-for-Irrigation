function [Y,Xf,Af] = Predict_yield_2(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 06-Jul-2017 18:22:07.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 84xQ matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84];
x1_step2.xoffset = [535;535;535;538;539;541;537;536;535;536;536;536;536;543;539;536;535;535;535;535;540;591;613;610;606;603;600;597;596;592;588;583;578;573;568;571;565;559;553;546;540;537;534;533;541;535;533;531;537;532;532;539;535;532;533;532;533;530;528;526;527;525;526;524;522;523;521;520;519;519;593;588;582;579;574;569;563;558;553;550];
x1_step2.gain = [0.0425531914893617;0.0454545454545455;0.0512820512820513;0.0540540540540541;0.0540540540540541;0.0526315789473684;0.0512820512820513;0.0526315789473684;0.0526315789473684;0.0555555555555556;0.0571428571428571;0.0571428571428571;0.0588235294117647;0.0606060606060606;0.0540540540540541;0.0303030303030303;0.0317460317460317;0.0333333333333333;0.0344827586206897;0.0357142857142857;0.0384615384615385;0.0425531914893617;0.0425531914893617;0.0434782608695652;0.0444444444444444;0.0253164556962025;0.0256410256410256;0.025974025974026;0.025974025974026;0.0263157894736842;0.0263157894736842;0.0263157894736842;0.025974025974026;0.025;0.0229885057471264;0.0172413793103448;0.0172413793103448;0.0173913043478261;0.0173913043478261;0.0172413793103448;0.0172413793103448;0.0173913043478261;0.0168067226890756;0.016260162601626;0.0153846153846154;0.0137931034482759;0.0140845070422535;0.0143884892086331;0.0151515151515152;0.0147058823529412;0.0149253731343284;0.0161290322580645;0.0161290322580645;0.016260162601626;0.0163934426229508;0.0147058823529412;0.0155038759689922;0.0158730158730159;0.0163934426229508;0.0169491525423729;0.0175438596491228;0.0168067226890756;0.0168067226890756;0.0168067226890756;0.016260162601626;0.015748031496063;0.016260162601626;0.0165289256198347;0.016260162601626;0.0166666666666667;0.0204081632653061;0.0198019801980198;0.0192307692307692;0.018018018018018;0.0176991150442478;0.0170940170940171;0.0163934426229508;0.016;0.016;0.0150375939849624];
x1_step2.ymin = -1;

% Layer 1
b1 = [-0.010522119610942788;0.01043846380432786;-0.010324126098082686;0.010453131050350138;0.11653989685656928;-0.0091388652967344056;-0.35822677806237424;-0.010559839475594739;0.19336243770091477;-0.010557207011982168];
IW1_1 = [0.027450838196441698 0.048430967591653572 -0.038793292363742161 0.022329912753429167 -0.079344332241014906 -0.052840995117172711 -0.014093262851544084 -0.045580976666971855 0.029375435359687098 0.075420006032954998 -0.063981260334519938 0.010135084865859716 -0.063855501862320571 -0.10653703065304287 0.018987134793454957 -0.034770465772756484 -0.11767475226160175 -0.077969661435597651 0.052204947089303587 0.026669828226921839 -0.028244515443967052 0.04945621684438483 0.10217724833170326 0.06436280491766333 0.032704766177516928 0.030254743840049718 0.062011319231098858 -0.036769515601784104 -0.053430310949092757 -0.012804874492513439 0.037116687123496458 0.038972608750120728 -0.043154323954582234 0.01976416833355206 -0.042038118664892918 -0.040239906790676294 -0.048505633624746643 -0.0014280047402378637 0.097831033882110521 0.025471411831984925 0.1299854217568987 -0.10497318734932413 0.075493003692459551 0.070185176978937946 0.077582843424028117 0.036186192257430451 -0.087531657728673662 0.0093258945069562872 0.031211653021204776 -0.098562373842262324 0.0031114743592552834 0.016717156604599239 -0.0096900862490768708 0.024654497724537639 0.0084420906253577389 -0.09095471299480884 0.02505422764996516 -0.067587945702945171 -0.14364271559565964 0.053366190699699154 0.13715347260278984 -0.090047781461143159 -0.093281965920839829 0.047066401344809099 0.031246983539860777 -0.081533143975900613 0.023923322667647948 0.048536276096673707 -0.0083516979444768439 0.10697480029695564 0.053714794145318615 0.037894410570464658 -0.029276078646737203 -0.045992092148665294 -0.036074210579645327 -0.048008553386253879 0.029197187351369679 0.0019806711261901948 0.062299330841340018 0.0087250310513622038;-0.027384984395643155 -0.048585074494691127 0.038901904615040443 -0.022386403761327011 0.079583776978087384 0.053023827544707205 0.014148220580891159 0.045759973211506585 -0.029428843989245924 -0.075611347499706674 0.064290914437968263 -0.010055748714503035 0.064142631782912435 0.10698397747940291 -0.018929854617788257 0.03495526510560476 0.11811946894055043 0.07831823621902205 -0.052404119567132902 -0.026768008720274985 0.028349967142616551 -0.049562887684509491 -0.10246127904177321 -0.064508638378692501 -0.032649378426441361 -0.030271546116758502 -0.062106016890502914 0.036997940537152732 0.053716023343732495 0.012967252651685836 -0.03711017760482526 -0.038941805836831551 0.043409236373373523 -0.019705480629801462 0.042290570660305907 0.040482420959192487 0.048774696696016327 0.0015519007649309571 -0.09801658918406049 -0.025400939002250402 -0.1302479241079372 0.10536756821999356 -0.075955778765285739 -0.070762972592269074 -0.078147783354042238 -0.036587380267439254 0.087680573960644936 -0.009478637456603092 -0.031404939630637965 0.09873427388212179 -0.0032763159310104295 -0.016871950504892114 0.0096665569716376468 -0.024602875955852529 -0.0085381373435196601 0.091204296893356504 -0.025157811898783983 0.067827423627156699 0.14413599092494334 -0.053479973436674051 -0.13773164198870677 0.090323527085033897 0.0935967093285585 -0.047318269907571403 -0.031357892919161398 0.081931787913319912 -0.024071040205230182 -0.048796739124910608 0.0083510319695429894 -0.10734413646877546 -0.0538776390957292 -0.03797257933980662 0.029411375625141088 0.046185467691029915 0.036231289372456878 0.048194097974775633 -0.029259910550789997 -0.0019219827214859654 -0.062450712019169859 -0.0086754041018142214;0.027337851615064423 0.04888007519763686 -0.03902636808939694 0.02251477806096502 -0.079912607443017897 -0.053269613857880205 -0.014196165660555397 -0.046013395027292105 0.029530341366754396 0.075917878907390657 -0.064736885214448828 0.0099496787431275577 -0.064564983595703798 -0.10764032613043413 0.018846940017505816 -0.035237225691491195 -0.11874974930433162 -0.078815287052913935 0.052726485472510201 0.026931727147692913 -0.028478144498187117 0.049751053745128893 0.1029173359860668 0.064754783401064234 0.032573731473159097 0.030296771934552193 0.062247201951930051 -0.037349056324594281 -0.054155629140937876 -0.013220273191167971 0.03709881665037295 0.038892169051490941 -0.043803227768877261 0.019605934166738198 -0.042692658235940026 -0.04086702503023807 -0.049201959393721739 -0.0017591328221991025 0.098276370385583026 0.025284611928202385 0.13064519839711589 -0.10596063692503731 0.076646514262708826 0.07160356932695823 0.078972254188796179 0.03716052638811107 -0.087936139449104694 0.0096882908497963639 0.031673340132002743 -0.098968442236173557 0.0035391404886294807 0.017086956479525517 -0.0096556814013763429 0.024546811636674076 0.0087037952747425935 -0.091594494988580868 0.025295455589990759 -0.068183136719482187 -0.14487505222021405 0.053647318743094953 0.13860903805475841 -0.090721673223643245 -0.094053363809604523 0.047689483966970821 0.031522623437532489 -0.082503113812688364 0.02432056600719992 0.049175960421039597 -0.0083628946139342759 0.10791397386681641 0.054136519085263769 0.038102530915230172 -0.029618346415794857 -0.046482877985812888 -0.03647779125402368 -0.048482341489741537 0.029346283387919642 0.00182665095794004 0.06266543421934169 0.00859117217886393;-0.027401719173729137 -0.048569654909980449 0.03888413182842293 -0.022383510090321631 0.079549078198340631 0.052996466729880606 0.014137526376396569 0.045732745252349952 -0.029425927294172521 -0.075590624985533914 0.06424593599873625 -0.010070758446045975 0.064102727221925074 0.10692235041112207 -0.018940192079713546 0.034929705034578519 0.11805746499644096 0.078268467566057862 -0.052376225714412653 -0.026754167721750495 0.028336255506984862 -0.049550070642454383 -0.10242489359339489 -0.064490972809680108 -0.032658913916813748 -0.030270267263357117 -0.06209498340957699 0.036966329715764933 0.053676945623626751 0.012944156940446294 -0.037113000916244789 -0.038948213000385624 0.043374508656955191 -0.019714489041738906 0.042256552480823238 0.04044969828625946 0.04873864310364593 0.0015345214349444622 -0.097993839237378519 -0.025412979978339693 -0.13021663185291837 0.10531365001175082 -0.075889866899421066 -0.07067804337245108 -0.078064767085003692 -0.03652616891674873 0.087665414904527283 -0.0094550980055381015 -0.031376534381209818 0.098712153313840381 -0.0032528096453959456 -0.016847957896283156 0.0096725739874712422 -0.024613692007720608 -0.0085255050702182211 0.091173805922207238 -0.025141792758661241 0.067795208313020508 0.14407002187182344 -0.053466519402150775 -0.13765233368180962 0.090287153528831626 0.093554519340028924 -0.047282010501666701 -0.031342580955336971 0.081875101648327592 -0.024051801450825836 -0.04875902236483403 0.0083529510710132222 -0.1072954723217166 -0.053856705259592103 -0.03796311080670213 0.029393520035677183 0.046160073735821004 0.036210931756497138 0.048170057942064692 -0.029251644284999843 -0.0019303171748927257 -0.062431097538862231 -0.0086827543487754209;-0.064142587236644732 0.099719432232802135 0.17980693199909942 0.1749134267165518 0.27941684463096694 0.04603844892987783 0.025013209317275287 0.18552373558538957 0.066329349954781 0.049970797059741646 0.039773588284669315 0.060765200358497549 -0.023220879578776533 0.071623647863977916 -0.040758812726275455 -0.036423448196374372 -0.02436578543037278 -0.093519035349826904 0.2826771014011033 0.10602334797210726 0.22141819253448444 0.07871688889753907 -0.069421461440814541 0.10507059170711372 0.18651935694463792 -0.02848168712362999 -0.065392632694036806 0.17074672627576992 0.2190923040309124 0.12238193266440296 -0.029376111292428796 -0.028621263800676072 0.17037272958598598 0.050912877077641722 0.09349566678660963 0.022906346558275639 0.04947950840731935 0.059460635647020171 0.00090750672984922889 0.14142431269697403 0.13436214702401014 -0.16774495215885299 -0.12405895618774804 -0.033708828974495932 -0.014383366865176203 -0.0031416285585474262 -0.07916273943817051 0.051155692208614087 -0.056598108103787348 -0.30212352959483058 -0.60133803157663446 0.084093317910045026 0.037905043702592761 -0.080057084875111414 -0.42007122478140546 0.27731247284098637 -0.074337807736555725 -0.34486381479511696 -0.12550911064414891 0.36000846049145713 -0.092698935463001716 -0.3634538771492109 -0.33018092981775649 -0.18197208672711288 -0.11101787365544599 0.045372650216556627 -0.24983160970634377 0.15024710175428205 0.20062697340863372 -0.50273656435141911 -0.2567682773587372 -0.17386550843067214 -0.091988117165441405 -0.029396091465135259 0.001295073333131164 0.023855059506190251 -0.10905260813972545 0.0094487974828174563 -0.13638205562469269 0.0059448518450781725;0.025999345742725395 0.049437352228480599 -0.040896788253244887 0.022222570155862036 -0.083086474287023176 -0.055522070315158142 -0.015161509462277501 -0.048383629854565742 0.029475382387476295 0.077106314903691672 -0.068338196194148534 0.0086484238610144825 -0.067711097785871754 -0.11235588699383837 0.017935997219544513 -0.037153928219440982 -0.12312040848679187 -0.082305581933666092 0.055716356015031589 0.028661044476840886 -0.028563839047465102 0.051407387618337588 0.10635981799092875 0.06683283559244188 0.032651051102980604 0.030725152835295356 0.063416233730158103 -0.039454253628107755 -0.056839355089708478 -0.014688044799249679 0.037243254047272759 0.038789137586344974 -0.046081169647521111 0.019262084230708947 -0.045061443288060846 -0.043119900369185678 -0.051727217611029407 -0.0029083299021035436 0.10016075964260425 0.024622328602532949 0.13336232077311999 -0.11090275709168021 0.080910506659094134 0.077119703956782845 0.084477546907325729 0.041110756535788585 -0.089234329846647087 0.011383502396008084 0.033869283970033144 -0.10160176442466555 0.0041987514315676711 0.01825960481969495 -0.0096946596596873356 0.024303123489753969 0.0092260142028728724 -0.09377091522440735 0.026615993988246933 -0.070727256837230371 -0.14993595466434426 0.055327258319697689 0.14419350446856649 -0.093126602582562654 -0.09679539993443026 0.05040652581875233 0.032780264208050962 -0.085665397350070158 0.025816135007134304 0.052465680447461652 -0.0076292503647786237 0.11167259635282829 0.056101711622335182 0.039214520651366547 -0.030702741538167901 -0.048182259328454435 -0.037824910456079934 -0.050128122732761793 0.029965405024942618 0.0013641727780601596 0.064118897757109133 0.0081858074287479224;0.31798986358918174 -0.0505624411640015 0.021532280606662169 0.11912062138682335 0.05893470327924593 0.074555102720348737 0.12041085280473506 -0.0087353213622520139 0.15738317324110371 0.20185327109415438 0.01469328164447771 0.20366197807184244 0.36677099450748968 0.24928780177522472 0.19096534239813981 0.14765506031178885 0.05326135975162561 0.17825178395838573 -0.35717704085193608 -0.090604314871801289 -0.19651362854336518 0.075521600584976367 0.1644808374505721 0.20323930926080319 -0.02639607611141077 0.14543755691644769 0.21530483144414561 -0.095950688774059378 -0.12541134731900971 -0.04449914032025027 0.015659538930462985 -0.042095171668813859 -0.1581736133849139 0.0044913600578277155 -0.11770017772300259 -0.0060744264339410653 -0.018742094635139595 0.015829400200380993 0.241282400290694 0.11200874167999876 0.060029052676463274 -0.42853207856614761 -0.51114246626127791 -0.16715515248661167 -0.18375694724351047 -0.18311638578173117 -0.012976054972012877 -0.006856227674920814 0.14138606839300097 -0.54668617352505167 -0.29480515392887907 -0.20002248580934887 -0.0664372639510762 0.12912310463351809 -0.20786224332684602 -0.42229598465525542 0.050365229318823916 -0.062560055627133709 -0.16800186587044283 -0.068975517335354133 -0.34483568132809306 -0.17526360670548055 -0.098518324480089653 -0.0082313083828002027 -0.0045774344794724201 -0.041152472863937535 -0.13044342841020548 -0.028202638533809957 0.0029088157555841976 0.2163635000960418 0.13870487247077731 0.065494032764922633 -0.076037321997623156 -0.088334795829929674 -0.066515384090015298 -0.064508338987296326 0.091964655894246738 0.0072064533946156481 0.11959809805555797 0.027852427488056993;0.027481558745506354 0.048361586369634099 -0.038747919125916269 0.022303787179259561 -0.079242067184430567 -0.052761487633619188 -0.014069311777206016 -0.045503046411400773 0.029352479777190424 0.075336798295205301 -0.06384576766714814 0.010170681249598497 -0.063730315231886603 -0.10634162333360944 0.019012977933671751 -0.034689149287913945 -0.117479114815316 -0.077815429700652389 0.052122489809270811 0.026630722859641572 -0.028193432332334293 0.049413937320283104 0.10205757283419505 0.06430373743887563 0.032734858345182444 0.030250007324647644 0.061972995866158453 -0.036667244873232516 -0.05330320850346483 -0.012731331699986371 0.037122750018771793 0.038989653082992452 -0.043040439817024136 0.019792658655020692 -0.041925999629847222 -0.040132160900479275 -0.048386464849135502 -0.0013720041986215346 0.097752646984746533 0.025505038832427846 0.12987480300848683 -0.10480627315746993 0.075284796900007597 0.069924697569136773 0.077328700127535691 0.036004061254983385 -0.08746893251006771 0.0092581484711657825 0.031127371151221613 -0.098494734519766008 0.0030312657852491205 0.016644734962667048 -0.0097039727358973898 0.024682161450388391 0.008396985330632779 -0.090845956899064453 0.025009198593151625 -0.067484426160038469 -0.1434281676232573 0.053322311074355033 0.13689764752437905 -0.089926323446080161 -0.093142592016196929 0.046955292023842694 0.031198817547572099 -0.081351809434960287 0.023858169985881573 0.048424301856548224 -0.0083488615981847612 0.10681394381104536 0.053645873091112864 0.037862567574083079 -0.02921567079564347 -0.045906656547002468 -0.036004671960181166 -0.047926851435608223 0.029170119392649976 0.0020076202362393513 0.062233915223800493 0.0087481395091218352;-0.15582049779139165 0.11120107104929612 -0.13842933451055847 -0.031457492558220793 -0.14409388306226723 0.18977848787127163 0.23618525882101982 -0.10939466652798317 0.072787394136582501 0.18081032671806321 -0.053869156949622743 0.14585032840731244 -0.13381333541616633 -0.29441548069825368 0.03933292643881961 -0.02510868254001615 0.13824898511597136 0.086847361069572193 -0.16036994103190211 -0.10425339859825181 -0.31125961865138252 0.052453948700309304 0.1232063345363756 0.11098872896885334 0.26303702993874084 0.10300253998448794 0.1803947498283312 0.087659256421130261 0.071658359240351382 0.14938253505505569 0.1239286176504163 0.23203058064106652 0.087010478955300036 0.1935043191992904 0.13574897107315886 0.096543280032832648 0.092139065148440599 0.10812945048207932 0.27693039384702944 0.1263759036068044 0.071726692674427162 -0.025036634010966209 0.074081096014149722 0.013423159708340701 -0.033623093971318019 -0.076172552520988882 -0.15511842968818171 -0.2643726163616254 -0.32624475419483329 -0.12647443730784436 0.05404283477231462 -0.0082719673828153071 -0.025479811712308266 -0.10705089013342355 0.18151206084629573 -0.13106921343438166 0.10354150236609035 0.11414885497540228 -0.10962979108107603 -0.2075036627827721 0.16336844412932397 0.056753580715538036 -0.043186040102718933 0.16128651460443358 0.12419247322380815 -0.17555701984422745 0.022336905194468633 -0.087637773518579806 -0.24524622147973393 0.015642536703644242 -0.19598322624550651 -0.1457002287289523 -0.17695224636912427 -0.19860157367717049 -0.17593605399401643 -0.21612061363618829 -0.021772396600648211 -0.16768323853336964 0.025791309436052744 -0.12928616029264917;0.027480316111026904 0.048370466335047282 -0.038747018748749452 0.022308665147696968 -0.07924473249091471 -0.052764846693301379 -0.0140693398115143 -0.045506769199404037 0.029354511266964922 0.075342508755590995 -0.063853460549091773 0.010168227218341831 -0.063737506897010174 -0.1063531793970834 0.019010726794410685 -0.034694813752865421 -0.1174909715854467 -0.077825688363254292 0.052124359426663977 0.026630405715715958 -0.028199793570010019 0.049413788422227933 0.1020620569056912 0.064304246252384817 0.032727993800841848 0.030248053735849687 0.06197263725839184 -0.03667590885600884 -0.053313319875161941 -0.01273843206520491 0.037119523243221209 0.038985313710072918 -0.043050009914246186 0.019787973386864478 -0.041935301730250236 -0.040141095765765925 -0.048396048472305428 -0.0013778441949573112 0.097754396956527281 0.025500109128141973 0.12987799339642619 -0.10481174966873721 0.075302672034788798 0.069946823055042476 0.077349813856307639 0.036020130842588066 -0.087471839010089092 0.0092625295394329447 0.031131603809432206 -0.098491150060066798 0.0030440719190710903 0.016652947383334376 -0.0097007440252194627 0.024676690104226667 0.0084032934110982831 -0.09085291314861263 0.025010916496338603 -0.067489662626662422 -0.14344030275583791 0.053319857200308705 0.1369164353546006 -0.089934217670742611 -0.093152311954087713 0.046962725013730264 0.03120134918700428 -0.081368355317670477 0.023863707616137004 0.048429055177396617 -0.0083523213071642292 0.10682383144384157 0.053648549684464114 0.037862772086961143 -0.029220791380720715 -0.045913121744723569 -0.036010227615830573 -0.047932848536266469 0.029171207560751984 0.0020044712647797067 0.062236824818582205 0.008745044209493593];

% Layer 2
b2 = 0.11588184485717255;
LW2_1 = [-0.54313338202705896 0.54494150620394555 -0.54766088824019954 0.54470107846245597 1.4951831766489467 -0.56603634971831585 -1.3836203452398015 -0.54234722045386563 -1.2133831603836376 -0.5423924114546842];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.000911577028258888;
y1_step1.xoffset = 6216;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
